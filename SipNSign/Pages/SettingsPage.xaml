<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="com.kizwiz.sipnsign.Pages.SettingsPage"
             Style="{StaticResource AppPageStyle}"
             Title="Settings">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">
            <!-- Sober Mode -->
            <Border Stroke="Gray" 
                    Padding="15" 
                    StrokeShape="RoundRectangle 10"
                    BackgroundColor="{DynamicResource CardBackground}"
                    Opacity="0.95">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Sober Mode" 
                           TextColor="{DynamicResource CardText}"
                           FontSize="20" 
                           FontAttributes="Bold"/>
                    <Switch x:Name="SoberModeSwitch" 
                            IsToggled="{Binding IsSoberMode}"
                            Toggled="OnSoberModeToggled"/>
                    <Label Text="Removes references to drinking from the app"
                           TextColor="{DynamicResource CardText}"
                           FontSize="14"/>
                </VerticalStackLayout>
            </Border>

            <!-- Questions Limit in Guess Mode -->
            <Border Stroke="Gray" 
                    Padding="15" 
                    StrokeShape="RoundRectangle 10"
                    BackgroundColor="{DynamicResource CardBackground}"
                    Opacity="0.95">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Guess Mode Questions" 
                           TextColor="{DynamicResource CardText}"
                           FontSize="20" 
                           FontAttributes="Bold"/>
                    <Label x:Name="QuestionsValueLabel"
                           Text="20 questions"
                           TextColor="{DynamicResource CardText}"
                           HorizontalOptions="Center"/>
                    <Slider x:Name="QuestionsSlider"
                            Minimum="10"
                            Maximum="100"
                            Value="20"
                            ValueChanged="OnQuestionsCountChanged"/>
                    <Label Text="Adjust how many questions to answer in Guess Mode"
                           TextColor="{DynamicResource CardText}"
                           FontSize="14"/>
                </VerticalStackLayout>
            </Border>

            <!-- Timer Settings -->
            <Border Stroke="Gray" 
                    Padding="15" 
                    StrokeShape="RoundRectangle 10"
                    BackgroundColor="{DynamicResource CardBackground}"
                    Opacity="0.95">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Guess Mode Timer" 
                           TextColor="{DynamicResource CardText}"
                           FontSize="20" 
                           FontAttributes="Bold"/>
                    <Label x:Name="TimerValueLabel"
                           Text="10 seconds"
                           TextColor="{DynamicResource CardText}"
                           HorizontalOptions="Center"/>
                    <Slider x:Name="TimerSlider"
                            Minimum="5"
                            Maximum="15"
                            Value="10"
                            ValueChanged="OnTimerDurationChanged"/>
                    <HorizontalStackLayout HorizontalOptions="Center">
                        <CheckBox x:Name="DisableTimerCheckbox" 
                                 CheckedChanged="OnDisableTimerChanged"/>
                        <Label Text="Disable Timer"
                               TextColor="{DynamicResource CardText}"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>
                    <Label Text="Adjust how long you have to answer in Guess Mode"
                           TextColor="{DynamicResource CardText}"
                           FontSize="14"/>
                </VerticalStackLayout>
            </Border>

            <!-- Feedback Delay -->
            <Border Stroke="Gray" 
                    Padding="15" 
                    StrokeShape="RoundRectangle 10"                 
                    BackgroundColor="{DynamicResource CardBackground}"
                    Opacity="0.95">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Incorrect Answer Delay" 
                           TextColor="{DynamicResource CardText}"
                           FontSize="20" 
                           FontAttributes="Bold"/>
                    <Label Text="{Binding Source={x:Reference DelaySlider}, Path=Value, StringFormat='{0:F0} seconds'}"
                           TextColor="{DynamicResource CardText}"
                           HorizontalOptions="Center"/>
                    <Slider x:Name="DelaySlider"
                            Minimum="2"
                            Maximum="10"
                            Value="5"
                            ValueChanged="OnDelaySliderChanged"/>
                    <Label Text="Adjust how long the feedback shows when you get an answer wrong"
                           TextColor="{DynamicResource CardText}"
                           FontSize="14"/>
                </VerticalStackLayout>
            </Border>

            <!-- Transparent Feedback -->
            <Border Stroke="Gray" 
                    Padding="15" 
                    StrokeShape="RoundRectangle 10"                 
                    BackgroundColor="{DynamicResource CardBackground}"
                    Opacity="0.95">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Transparent Feedback" 
                           TextColor="{DynamicResource CardText}"
                           FontSize="20" 
                           FontAttributes="Bold"/>
                    <Switch x:Name="TransparentFeedbackSwitch" 
                            IsToggled="{Binding IsTransparentFeedback}"
                            Toggled="OnTransparentFeedbackToggled"/>
                    <Label Text="Makes feedback display transparent instead of colored"
                           TextColor="{DynamicResource CardText}"
                           FontSize="14"/>
                </VerticalStackLayout>
            </Border>

            <!-- Theme Picker -->
            <Border Stroke="Gray" 
                    Padding="15" 
                    StrokeShape="RoundRectangle 10"                 
                    BackgroundColor="{DynamicResource CardBackground}"
                    Opacity="0.95">
                <VerticalStackLayout Spacing="15">
                    <Label Text="App Theme" 
                           TextColor="{DynamicResource CardText}"
                           FontSize="20" 
                           FontAttributes="Bold"/>
                    <Picker x:Name="ThemePicker"
                            TextColor="{DynamicResource CardText}"
                            SelectedIndexChanged="OnThemeSelected">
                        <Picker.ItemsSource>
                            <x:Array Type="{x:Type x:String}">
                                <x:String>Blue</x:String>
                                <x:String>Dark</x:String>
                                <x:String>Light</x:String>
                                <x:String>Sunset</x:String>
                                <x:String>Forest</x:String>
                                <x:String>Ocean</x:String>
                                <x:String>Neon</x:String>
                                <x:String>Monochrome</x:String>
                            </x:Array>
                        </Picker.ItemsSource>
                    </Picker>
                </VerticalStackLayout>
            </Border>

            <Button Text="Save Changes"
                    Clicked="OnSaveClicked"
                    Style="{StaticResource PrimaryButton}"
                    Margin="0,20,0,20"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>